(()=>{var e={};e.id=608,e.ids=[608],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),r(5576),r(9561),r(5866);var s=r(3191),a=r(8716),l=r(7922),n=r.n(l),i=r(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5576)),"C:\\Users\\Naam\\Documents\\Procurement_App\\app\\requests\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9561)),"C:\\Users\\Naam\\Documents\\Procurement_App\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Naam\\Documents\\Procurement_App\\app\\requests\\page.tsx"],x="/requests/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/requests/page",pathname:"/requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3959:(e,t,r)=>{Promise.resolve().then(r.bind(r,579))},1970:(e,t,r)=>{Promise.resolve().then(r.bind(r,3001))},8555:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3001:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(326),a=r(7577),l=r(434);function n(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null),[x,u]=(0,a.useState)("all"),m=e=>{switch(e){case"requested":return"bg-blue-100 text-blue-800";case"waiting_for_approval":return"bg-yellow-100 text-yellow-800";case"approval_completed":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},p=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),h=e.filter(e=>"all"===x||e.status===x),g={all:e.length,requested:e.filter(e=>"requested"===e.status).length,waiting_for_approval:e.filter(e=>"waiting_for_approval"===e.status).length,approval_completed:e.filter(e=>"approval_completed"===e.status).length,rejected:e.filter(e=>"rejected"===e.status).length};return i?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"All Requests"}),s.jsx("p",{className:"text-gray-600",children:"Loading procurement requests..."})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})})]}):o?(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"All Requests"})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading requests"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:o})]})]})})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:r&&"requester"===r.role?"My Requests":"All Requests"}),s.jsx("p",{className:"text-gray-600",children:(()=>{if(!r)return"View and manage procurement requests";switch(r.role){case"requester":return"View and manage your procurement requests";case"purchaser":return"Review and process procurement requests from all requesters";case"ceo":return"Review and approve procurement requests";default:return"View and manage procurement requests"}})()})]}),s.jsx(l.default,{href:"/",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"New Request"})]}),(r?.role==="purchaser"||r?.role==="ceo")&&s.jsx("div",{className:"bg-white rounded-lg shadow",children:s.jsx("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[(0,s.jsxs)("button",{onClick:()=>u("all"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"all"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["All (",g.all,")"]}),(0,s.jsxs)("button",{onClick:()=>u("requested"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"requested"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["New Requests (",g.requested,")"]}),(0,s.jsxs)("button",{onClick:()=>u("waiting_for_approval"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"waiting_for_approval"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending Approval (",g.waiting_for_approval,")"]}),(0,s.jsxs)("button",{onClick:()=>u("approval_completed"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"approval_completed"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Approved (",g.approval_completed,")"]}),(0,s.jsxs)("button",{onClick:()=>u("rejected"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"rejected"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Rejected (",g.rejected,")"]})]})})}),0===h.length?s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r?.role==="requester"?"No requests yet":"all"===x?"No requests":`No ${x.replace("_"," ")} requests`}),s.jsx("p",{className:"text-gray-600 mb-4",children:r?.role==="requester"?"Get started by creating your first procurement request.":"all"===x?"No procurement requests have been submitted yet.":`No requests with "${x.replace("_"," ")}" status.`}),r?.role==="requester"&&s.jsx(l.default,{href:"/",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Create First Request"})]})}):s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"ID"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Justification/Project"}),(r?.role==="purchaser"||r?.role==="ceo")&&s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Requester"}),(r?.role==="purchaser"||r?.role==="ceo")&&s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Items"}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Status"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Date"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>{let t=e.items.length>0?e.items[0].justification:"No justification provided",a=e.items.reduce((e,t)=>e+("number"==typeof t.estimatedCost?t.estimatedCost:0),0);return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id}),s.jsx("td",{className:"px-3 py-4 text-sm text-gray-900",children:s.jsx("div",{className:"max-w-xs",style:{whiteSpace:"normal",wordWrap:"break-word"},children:t})}),(r?.role==="purchaser"||r?.role==="ceo")&&(0,s.jsxs)("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.jsx("div",{className:"truncate",title:e.requesterName,children:e.requesterName.split("@")[0]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 truncate",children:["@",e.requesterName.split("@")[1]]})]}),(r?.role==="purchaser"||r?.role==="ceo")&&s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,s.jsxs)("div",{children:[e.items.length," item",1!==e.items.length?"s":"",a>0&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["~€",a.toFixed(2)]})]})}),s.jsx("td",{className:"px-3 py-4 text-center",children:s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${m(e.status)} min-w-20`,style:{whiteSpace:"pre-line",textAlign:"center"},children:"waiting_for_approval"===e.status?"Waiting for\nApproval":e.status.replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")})}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:p(e.requestDate)}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm",children:s.jsx(l.default,{href:`/requests/${e.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:(r?.role==="purchaser"||r?.role==="ceo")&&("requested"===e.status||"waiting_for_approval"===e.status)?"Process Request":"View Details"})})]},e.id)})})]})})})]})}},579:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(326),a=r(7577),l=r(5047),n=r(434);function i({children:e}){let[t,r]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0),o=(0,l.useRouter)(),c=(0,l.usePathname)(),x=["/login"].includes(c),u=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),r(null),o.push("/login?message=logged-out")}catch(e){}};return i&&!x?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):x||!t?s.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx(n.default,{href:(e=>{switch(e){case"ceo":case"purchaser":return"/requests";default:return"/"}})(t.role),className:"text-2xl font-semibold text-gray-900 hover:text-gray-700",children:"Procurement System"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("nav",{className:"flex space-x-4",children:(t?[{href:"/requests",label:"All Requests"}]:[]).map(e=>s.jsx(n.default,{href:e.href,className:`px-3 py-2 text-sm font-medium ${c===e.href?"text-blue-600 bg-blue-50 rounded-md":"text-gray-600 hover:text-gray-900"}`,children:e.label},e.href))}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 border-l pl-4",children:[(0,s.jsxs)("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-gray-900",children:t.name}),s.jsx("p",{className:"text-gray-500 capitalize",children:t.role})]}),s.jsx("button",{onClick:u,className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:"Logout"})]})]})]})})}),s.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:e})]})}},9561:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>l});var s=r(9510);let a=(0,r(8570).createProxy)(String.raw`C:\Users\Naam\Documents\Procurement_App\components\AuthenticatedLayout.tsx#default`);r(7272);let l={title:"Procurement App",description:"Digital procurement request system for engineering teams"};function n({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"antialiased",children:s.jsx(a,{children:e})})})}},5576:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\Naam\Documents\Procurement_App\app\requests\page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,982],()=>r(7982));module.exports=s})();