exports.id=640,exports.ids=[640],exports.modules={3959:(e,t,s)=>{Promise.resolve().then(s.bind(s,579))},8555:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},579:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(326),i=s(7577),a=s(5047),l=s(434);function n({children:e}){let[t,s]=(0,i.useState)(null),[n,d]=(0,i.useState)(!0),o=(0,a.useRouter)(),u=(0,a.usePathname)(),c=["/login"].includes(u),m=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),s(null),o.push("/login?message=logged-out")}catch(e){}};return n&&!c?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):c||!t?r.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx(l.default,{href:(e=>{switch(e){case"ceo":case"purchaser":return"/requests";default:return"/"}})(t.role),className:"text-2xl font-semibold text-gray-900 hover:text-gray-700",children:"Procurement System"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("nav",{className:"flex space-x-4",children:(t?[{href:"/requests",label:"All Requests"}]:[]).map(e=>r.jsx(l.default,{href:e.href,className:`px-3 py-2 text-sm font-medium ${u===e.href?"text-blue-600 bg-blue-50 rounded-md":"text-gray-600 hover:text-gray-900"}`,children:e.label},e.href))}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 border-l pl-4",children:[(0,r.jsxs)("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-gray-900",children:t.name}),r.jsx("p",{className:"text-gray-500 capitalize",children:t.role})]}),r.jsx("button",{onClick:m,className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:"Logout"})]})]})]})})}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:e})]})}},656:(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var r=s(326),i=s(7577);let a=e=>e.trim()?e.length<2?"Item name must be at least 2 characters":void 0:"Item name is required",l=e=>{if(""===e||null==e)return"Quantity is required";let t=Number(e);if(isNaN(t)||t<=0)return"Quantity must be a positive number"},n=e=>e.trim()?e.length<10?"Please provide a detailed justification (at least 10 characters)":void 0:"Justification is required",d=e=>{if(e&&e.trim()&&e.includes("http")&&!p(e))return"Please enter a valid URL or reference"},o=e=>{if(""!==e&&null!=e){let t=Number(e);if(isNaN(t)||t<0)return"Cost must be a positive number"}},u=e=>{if(!e||!["urgent","medium","low"].includes(e))return"Priority is required"},c=e=>{if(e&&e.trim()){let t=new Date(e),s=new Date;if(s.setHours(0,0,0,0),isNaN(t.getTime()))return"Please enter a valid date";if(t<s)return"Needed by date cannot be in the past"}},m=e=>({itemName:a(e.itemName),quantity:l(e.quantity),justification:n(e.justification),supplierReference:d(e.supplierReference),estimatedCost:o(e.estimatedCost),priority:u(e.priority),neededByDate:c(e.neededByDate)}),x=e=>{let t={};return e.forEach(e=>{let s=m(e);Object.values(s).some(e=>void 0!==e)&&(t[e.id]=s)}),t},h=e=>Object.keys(e).length>0,p=e=>{try{return new URL(e),!0}catch(e){return!1}},b=e=>({id:e,itemName:"",quantity:"",justification:"",supplierName:"",supplierReference:"",estimatedCost:"",priority:"",neededByDate:""});function f({onSubmit:e,initialData:t,isEditing:s=!1}){let[a,l]=(0,i.useState)(t?.items||[b("item-1")]),[n,d]=(0,i.useState)({}),[o,u]=(0,i.useState)(!1),[c,m]=(0,i.useState)(null),[p,f]=(0,i.useState)(!1),[g,y]=(0,i.useState)(null),j=()=>`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,N=(0,i.useCallback)(()=>{let e=b(j());l(t=>[...t,e])},[]),v=(0,i.useCallback)(e=>{a.length>1&&(l(t=>t.filter(t=>t.id!==e)),d(t=>{let s={...t};return delete s[e],s}))},[a.length]),w=(0,i.useCallback)((e,t,s)=>{l(r=>r.map(r=>r.id===e?{...r,[t]:s}:r)),d(s=>{let r=s[e];if(r&&r[t]){let i={...r};delete i[t];let a=Object.values(i).some(e=>void 0!==e),l={...s};return a?l[e]=i:delete l[e],l}return s})},[]),C=(0,i.useCallback)(()=>{let e=x(a);return d(e),!h(e)},[a]),q=async s=>{if(s.preventDefault(),C()){f(!0),y(null);try{let s={id:t?.id||`req-${Date.now()}`,requesterName:t?.requesterName||c?.email||"Unknown User",requestDate:t?.requestDate||new Date().toISOString(),items:a.map(e=>({...e,quantity:Number(e.quantity)||0,estimatedCost:e.estimatedCost?Number(e.estimatedCost):0,priority:e.priority})),status:t?.status||"requested"};e&&await e(s),u(!0)}catch(e){y(e instanceof Error?e.message:"Failed to submit request")}finally{f(!1)}}};return o?r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s?"Request Updated Successfully":"Request Submitted Successfully"}),r.jsx("p",{className:"text-gray-600 mb-6",children:s?"Your procurement request has been updated successfully.":"Your procurement request has been submitted and is now waiting for approval."}),r.jsx("button",{onClick:()=>{u(!1),l([b(j())]),d({}),y(null)},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Submit Another Request"})]})}):r.jsx("form",{onSubmit:q,className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"space-y-8",children:[a.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Item ",t+1]}),a.length>1&&r.jsx("button",{type:"button",onClick:()=>v(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove Item"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Name / Description *"}),r.jsx("input",{type:"text",value:e.itemName,onChange:t=>w(e.id,"itemName",t.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n[e.id]?.itemName?"border-red-500":"border-gray-300"}`,placeholder:"Enter item name or description"}),n[e.id]?.itemName&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:n[e.id].itemName})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),r.jsx("input",{type:"number",min:"1",value:e.quantity,onChange:t=>w(e.id,"quantity",t.target.value?Number(t.target.value):""),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n[e.id]?.quantity?"border-red-500":"border-gray-300"}`,placeholder:"0"}),n[e.id]?.quantity&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:n[e.id].quantity})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Justification / Reason *"}),r.jsx("textarea",{value:e.justification,onChange:t=>w(e.id,"justification",t.target.value),rows:3,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n[e.id]?.justification?"border-red-500":"border-gray-300"}`,placeholder:"Explain why this item is needed"}),n[e.id]?.justification&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:n[e.id].justification})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name"}),r.jsx("input",{type:"text",value:e.supplierName,onChange:t=>w(e.id,"supplierName",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter supplier name"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Reference / Link"}),r.jsx("input",{type:"text",value:e.supplierReference,onChange:t=>w(e.id,"supplierReference",t.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n[e.id]?.supplierReference?"border-red-500":"border-gray-300"}`,placeholder:"Part number, URL, or reference"}),n[e.id]?.supplierReference&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:n[e.id].supplierReference})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Cost"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"â‚¬"}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:e.estimatedCost,onChange:t=>w(e.id,"estimatedCost",t.target.value?Number(t.target.value):""),className:`w-full pl-8 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n[e.id]?.estimatedCost?"border-red-500":"border-gray-300"}`,placeholder:"0.00"})]}),n[e.id]?.estimatedCost&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:n[e.id].estimatedCost})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),(0,r.jsxs)("select",{value:e.priority,onChange:t=>w(e.id,"priority",t.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n[e.id]?.priority?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select priority"}),r.jsx("option",{value:"urgent",children:"Urgent"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"low",children:"Low"})]}),n[e.id]?.priority&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:n[e.id].priority})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Needed By Date"}),r.jsx("input",{type:"date",value:e.neededByDate,onChange:t=>w(e.id,"neededByDate",t.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n[e.id]?.neededByDate?"border-red-500":"border-gray-300"}`}),n[e.id]?.neededByDate&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:n[e.id].neededByDate})]})]})]},e.id)),r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{type:"button",onClick:N,className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-200 transition-colors border border-gray-300",children:"+ Add Item"})}),g&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-800",children:g})})]})}),r.jsx("div",{className:"flex justify-end pt-6 border-t",children:(0,r.jsxs)("button",{type:"submit",disabled:p,className:"bg-blue-600 text-white px-8 py-3 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[p&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p?"Submitting...":"Submit Request"]})})]})})}},9561:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>a});var r=s(9510);let i=(0,s(8570).createProxy)(String.raw`C:\Users\Naam\Documents\Procurement_App\components\AuthenticatedLayout.tsx#default`);s(7272);let a={title:"Procurement App",description:"Digital procurement request system for engineering teams"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"antialiased",children:r.jsx(i,{children:e})})})}},7272:()=>{}};