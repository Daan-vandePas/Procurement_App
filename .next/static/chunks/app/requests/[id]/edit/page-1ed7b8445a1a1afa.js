(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[657],{2124:function(e,s,t){Promise.resolve().then(t.bind(t,9155))},9155:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),r=t(2265),n=t(9376),i=t(7648),c=t(1613);function d(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),t=e.id,[d,u]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[h,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/requests/".concat(t));if(!e.ok){if(404===e.status)m("Request not found");else throw Error("Failed to fetch request");return}let s=await e.json();if("requested"!==s.status){m("This request cannot be edited because it has already been processed.");return}u(s)}catch(e){m(e instanceof Error?e.message:"Failed to load request")}finally{l(!1)}};t&&e()},[t]);let x=async e=>{try{let a=await fetch("/api/requests/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update request")}let r=await a.json();return setTimeout(()=>{s.push("/requests/".concat(t))},2e3),r}catch(e){throw e}};return o?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})]})}):h?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Request"}),(0,a.jsx)(i.default,{href:"/requests/".concat(t),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Back to Request"})]}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Cannot edit request"}),(0,a.jsx)("p",{className:"text-sm text-red-700 mt-1",children:h})]})]})})]}):d?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Request"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Request ID: ",d.id]})]}),(0,a.jsx)(i.default,{href:"/requests/".concat(t),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Cancel"})]}),(0,a.jsx)(c.Z,{onSubmit:x,initialData:d,isEditing:!0})]}):null}},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[648,613,971,117,744],function(){return e(e.s=2124)}),_N_E=e.O()}]);